(()=>{"use strict";var e=document.querySelector(".page");function t(t){t.classList.add("popup_opened"),e.addEventListener("keydown",o),e.addEventListener("mousedown",n)}function r(t){t.classList.remove("popup_opened"),e.removeEventListener("keydown",o),e.removeEventListener("mousedown",n)}function o(t){if("Escape"===t.key){var o=e.querySelector(".popup_opened");o&&r(o)}}function n(t){if(t.target.classList.contains("popup")){var o=e.querySelector(".popup_opened");o&&r(o)}}var u=document.querySelector(".popup_bigImg"),c=document.querySelector(".popup_bigImg__capture"),i=document.querySelector(".popup_bigImg__image"),p=document.querySelector("#photo-item").content;function l(e){e.target.closest(".photo-grid__element").remove()}function a(e){e.target.classList.toggle("photo-grid__like_active")}var s=["inputSelector","submitButtonSelector"];function d(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r,o,n={},u=Object.keys(e);for(o=0;o<u.length;o++)r=u[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(o=0;o<u.length;o++)r=u[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var m,_,v,f=function(e,t){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?t.disabled=!1:t.disabled=!0},y=document.querySelector(".profile__edit"),S=document.querySelector(".profile__add"),g=document.querySelector(".popup_edit"),q=document.querySelector(".popup_image"),b=document.querySelectorAll(".popup__close"),k=g.querySelector(".popup__form"),h=k.querySelector(".popup__input_type_name"),E=k.querySelector(".popup__input_type_about"),L=document.querySelector(".profile__name"),x=document.querySelector(".profile__about"),C=document.querySelector(".popup-image__form"),j=document.querySelector(".popup__input_place-name"),O=document.querySelector(".popup__input_place-link"),w=document.querySelector(".photo-grid");function A(e,r){var o=function(e,r){var o=p.querySelector(".photo-grid__element").cloneNode(!0);o.querySelector(".photo-grid__title").textContent=r;var n=o.querySelector(".photo-grid__img");n.src=e,n.alt=r,n.addEventListener("click",(function(){!function(e,r){t(u),i.src=e,i.alt=r,c.textContent=r}(e,r)}));var s=o.querySelector(".photo-grid__like"),d=o.querySelector(".photo-grid__delete");return s.addEventListener("click",a),d.addEventListener("click",l),o}(e,r);w.prepend(o)}y.addEventListener("click",(function(){h.value=L.textContent,E.value=x.textContent,t(g)})),S.addEventListener("click",(function(){t(q)})),b.forEach((function(e){e.addEventListener("click",(function(){r(document.querySelector(".popup_opened"))}))})),[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(e){A(e.link,e.name)})),k.addEventListener("submit",(function(e){e.preventDefault(),L.textContent=h.value,x.textContent=E.value,r(g)})),C.addEventListener("submit",(function(e){e.preventDefault();var t=j.value,o=O.value;r(q),A(o,t),j.value="",O.value="";var n=q.querySelector(".popup__submit");n.disabled=!0,n.classList.add("popup__submit_disabled")})),_=(m={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__submit",inputErrorClass:"popup__input-error",errorClass:".popup__input-error_active"}).formSelector,v=d(m,["formSelector"]),Array.from(document.querySelectorAll(_)).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),function(e,t){var r=t.inputSelector,o=t.submitButtonSelector,n=d(t,s),u=Array.from(e.querySelectorAll(r)),c=e.querySelector(o);f(u,c),u.forEach((function(t){t.addEventListener("input",(function(){!function(e,t,r){t.validity.valid?function(e,t,r){var o=r.inputErrorClass,n=r.errorClass,u=e.querySelector(".".concat(t.id,"-error"));t.classList.remove(o),u.textContent="",u.classList.remove(n)}(e,t,r):function(e,t,r,o){var n=o.inputErrorClass,u=o.errorClass,c=e.querySelector(".".concat(t.id,"-error"));t.classList.add(n),c.textContent=r,c.classList.add(u)}(e,t,function(e,t){return"url"===e.type.toString()&&e.validity.typeMismatch,e.validity.valueMissing?"Вы пропустили это поле.":e.validationMessage}(t),r)}(e,t,n),f(u,c)}))}))}(e,v)}))})();